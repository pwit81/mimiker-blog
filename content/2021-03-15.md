Title: Terminal infrastructure improvements and procstat device implementation 
Date: 2021-03-15 16:00
Category: Blog

### Port of `libterminfo` from NetBSD (**JPiec**)

[`terminfo`][6] is a user-mode low-level library that exhibits terminal capabilities to libraries like [`curses`][7]. With those you may change terminal modes, move cursor, write to terminal in color and even define textual windows. Inclusion of `terminfo` will greatly improve Mimiker's user interface. We   'll present here relevant demos, when available.

### Introduction generic uart interface to interact with tty [#1019][12] (**PJ**)

`tty` is a software device that provides terminal interface to user programs and asynchronously communicates with underlying [UARTs][10 like [ns16550][9] (Malta) or [PL011][8] (RPi3). In order to separate `tty` from these physical devices, a thin software layer consisting of `uart` and `uart_tty` was introduced. `uart_tty` defines a kernel thread that transfers data between `tty` input/output queues and the underlying UART. Most time the thread sleeps and is only waked up by an ISR that reacts to incoming traffic. The nice fact is that the ISR, defined by `uart` module, is generic rather than hardware specific, and communicates with underlying device using an abstract interface.


### Further integration of KASAN with Mimiker kernel (**PJ**)

The Kernel Address Sanitizer ([KASAN][11]) keeps track on allocated/freed memory by using *shadow map*  which should grow as the kernel mapped memory grows. This is the purpose of [#1040][13].


### Debugging AArch64 platform code (**JPiec**)

 * Fix build & test run with -O2 optimization flag [#1039][1] 
 * Preserve value of x18 register across kernel interrupts [#1038][5]


### Timers fixes.



### Removing modulo operation from PIT. **WP** #987
### Remove modulo operation (MIPS timer) & prefer MIPS timer over PIT #1008
### Fix for counter overflow - arm timer #1032

### Dev procstat is finaly there! **FZ**

Dev procstat #974



### Further work on Statclock and gprof structures initialization **WP**


### Lock dependency validator **WP** #996


### Housekeeping

Conversion of some macros into inline functions [#1035][2], ensuring proper argument evaluation for others [#1034][3] (**PJ**), fixing `kstrndup` [#1044][4] (**JPiec**)




[1]: https://github.com/cahirwpz/mimiker/pull/1039
[2]: https://github.com/cahirwpz/mimiker/pull/1035
[3]: https://github.com/cahirwpz/mimiker/pull/1034
[4]: https://github.com/cahirwpz/mimiker/pull/1044
[5]: https://github.com/cahirwpz/mimiker/pull/1038
[6]: https://man.netbsd.org/terminfo.3
[7]: https://man.netbsd.org/curses.3
[8]: https://developer.arm.com/documentation/ddi0183/g/preface
[9]: https://en.wikipedia.org/wiki/16550_UART
[10]: https://en.wikipedia.org/wiki/Universal_asynchronous_receiver-transmitter
[11]: https://en.wikipedia.org/wiki/AddressSanitizer
[12]: https://github.com/cahirwpz/mimiker/pull/1019
[13]: https://github.com/cahirwpz/mimiker/pull/1040